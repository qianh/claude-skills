# PRD 文档拆分助手

将产品 PRD 文档按需求-任务维度拆分为独立的 Markdown 文件。

## 触发条件

用户提供 PRD 文档（PDF、Word 等）并希望将其拆分为独立需求文档时使用。典型触发词：

- "拆分 PRD"、"分析 PRD"、"PRD 拆解"
- "把这个需求文档拆分一下"
- "帮我整理这个产品文档"

## 工作流程

### 第一步：确认输入

1. **获取文档路径**：用户提供的 PRD 文档路径
2. **确认范围**：
   - 用户指定模块 → 仅分析该模块
   - 用户未指定 → 全文档分析
3. **确认输出路径**：默认在当前目录创建 `需求-{项目名}/` 文件夹

### 第二步：文档分析

使用 Read 工具读取文档，识别以下结构：

**文档层级识别**：

- 版本迭代记录（如有）
- 模块划分（一级标题）
- 功能点（二级标题）
- 具体需求（三级及以下标题）

**内容元素识别**：

- 需求描述文本
- 字段规格表格
- UI 截图/原型图
- 业务规则/逻辑说明
- 接口定义（API）
- 权限配置

### 第三步：需求拆分

**拆分原则**：

1. 每个独立功能点拆分为一个 md 文件
2. 保持需求的完整性和自包含性
3. 文件命名：`{序号}-{功能名称}.md`

**单个需求文件结构**：

```markdown
# {需求标题}

## 基本信息

- **所属模块**：{模块名}
- **版本**：{版本号}
- **优先级**：{如有}

## 需求描述

{完整的需求说明}

## 功能规格

### 字段说明

{字段列表、类型、校验规则等}

### 业务逻辑

{业务规则、计算逻辑、状态流转等}

### UI 说明

{界面布局、交互说明}
{截图引用：![描述](./assets/xxx.png)}

## 接口定义

{如有 API 相关内容}

## 关联需求

- 前置依赖：{列出依赖的其他需求}
- 后续影响：{列出会影响到的需求}
- 相关需求：{有业务关联的需求}

## 备注

{其他补充信息}
```

### 第四步：处理关联关系

1. **识别跨需求依赖**：
   - 数据依赖（A 需求的数据被 B 使用）
   - 流程依赖（A 完成后才能进行 B）
   - 接口依赖（共用接口或调用关系）

2. **标注方式**：
   - 在每个需求文件的"关联需求"部分明确标注
   - 使用相对链接：`[需求名](./01-xxx.md)`

### 第五步：生成输出

1. 创建输出目录结构：

```
需求-{项目名}/
├── README.md          # 需求概览和目录
├── 01-{功能A}.md
├── 02-{功能B}.md
├── ...
└── assets/            # 截图和附件
    ├── 01-screenshot1.png
    └── ...
```

2. 生成 README.md 包含：
   - 项目概述
   - 版本信息
   - 需求清单（带链接）
   - 依赖关系图（文本形式）

## 执行示例

**用户输入**：

```
帮我拆分这个 PRD：/path/to/prd.pdf
只分析"客服单证"模块
```

**执行步骤**：

1. 读取 /path/to/prd.pdf
2. 定位"客服单证"模块内容
3. 识别该模块下的所有功能点
4. 为每个功能点创建独立 md 文件
5. 标注功能点之间的关联
6. 生成 README.md 汇总

## 注意事项

1. **图片处理**：PDF 中的截图需提示用户手动导出，或标注"[截图：xxx]"占位
2. **表格转换**：将文档中的表格转换为 Markdown 表格格式
3. **编号保持**：保留原文档的章节编号以便追溯
4. **完整性检查**：拆分后确保每个需求文件可独立理解
5. **中文友好**：文件名使用中文，确保可读性
